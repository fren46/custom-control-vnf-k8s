{% if action == "update" and "Trigger" in resourceKinds %}
apiVersion: eventing.knative.dev/v1
kind: Trigger
metadata:
  name: {{ triggerName }}
spec:
  broker: default
  filter:
    attributes:
      {% if triggerKind == "trigger-for-type" %}
      type: {{ type }}
      {% elif triggerKind == "trigger-on-propchange" %}
      type: subject-property-changed
      propertyname: {{ propertyName }}
      {% elif triggerKind == "trigger-sourced" %}
      type: {{ rulesetName }}-{{ triggerSourced }}
      {% elif triggerKind == "trigger-attrs" %}
        {% for key, value in triggerAttributes.items() %}
        {{key}}: {{value}}
        {% endfor %}
      {% endif %}
  subscriber:
    ref:
      apiVersion: {{ serviceApiVersion }}
      kind: Service
      name: {{ rulesetName }}
{% endif %}